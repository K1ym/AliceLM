# 📺 Bili-Learner 产品规划文档

> **愿景**：让每一个收藏的视频，都变成可检索、可理解、可回顾的知识资产

---

## 1. 产品定位

### 1.1 核心问题
- 收藏视频 = 假装学习，收藏后再也不看
- NotebookLM等工具启动成本高，融入不了日常工作流
- 知识碎片化，无法形成体系

### 1.2 解决方案
一个**无感融入日常**的学习助手：
- 收藏即处理，自动转写+AI理解
- 微信推送结果，零启动成本
- 知识自动关联，构建个人知识库

### 1.3 产品形态
| 端 | 定位 | 核心场景 |
|----|------|----------|
| **微信Bot** | 随身助手 | 接收通知、快速问答、碎片复习 |
| **Web UI** | 书房工作台 | 深度阅读、知识图谱、批量管理 |
| **MCP Server** | AI助手扩展 | 让Claude/GPT等AI直接调用知识库 |
| **后台服务** | 引擎 | 监控、处理、AI分析 |

---

## 2. 用户故事

### 2.1 内容获取
| ID | 用户故事 | 优先级 |
|----|----------|--------|
| S01 | 我收藏B站视频后，系统自动下载并转写成文字 | P0 |
| S02 | 我可以批量导入历史收藏夹中的视频 | P1 |
| S03 | 我可以手动上传本地视频进行处理 | P2 |
| S04 | 我可以添加YouTube/播客等其他来源 | P3 |

### 2.2 AI理解
| ID | 用户故事 | 优先级 |
|----|----------|--------|
| S10 | 视频处理完成后，我收到包含摘要和核心观点的推送 | P0 |
| S11 | 系统自动为视频打标签和分类 | P1 |
| S12 | 我可以向AI提问关于某个视频的问题 | P0 |
| S13 | 系统自动识别视频中的关键概念 | P1 |

### 2.3 知识关联
| ID | 用户故事 | 优先级 |
|----|----------|--------|
| S20 | 收到推送时，我能看到和之前视频的关联 | P1 |
| S21 | 我可以问"关于XXX概念，我学过哪些视频" | P1 |
| S22 | 我可以查看知识图谱，看到概念和视频的关系 | P2 |
| S23 | 系统能发现跨领域的共通点 | P2 |

### 2.4 学习追踪
| ID | 用户故事 | 优先级 |
|----|----------|--------|
| S30 | 我每周收到学习周报，包含本周学习统计 | P1 |
| S31 | 周报里有复习题，帮助我巩固记忆 | P2 |
| S32 | 我可以查看知识覆盖度，发现学习盲区 | P2 |
| S33 | 系统根据遗忘曲线提醒我复习 | P3 |

### 2.5 深度学习（Web）
| ID | 用户故事 | 优先级 |
|----|----------|--------|
| S40 | 我可以在Web上阅读完整视频文稿 | P0 |
| S41 | 我可以管理视频的标签和分类 | P1 |
| S42 | 我可以导出笔记到Markdown/Notion | P2 |
| S43 | 我可以生成Anki学习卡片 | P3 |

### 2.6 集成扩展（MCP）
| ID | 用户故事 | 优先级 |
|----|----------|--------|
| S50 | 我在Claude/Cursor中可以直接搜索我的视频知识库 | P1 |
| S51 | 我可以让AI基于我学过的视频内容回答问题 | P1 |
| S52 | 我可以让AI帮我找到和当前工作相关的学习资料 | P2 |
| S53 | 第三方AI工具可以通过MCP协议接入我的知识库 | P2 |

### 2.7 系统配置
| ID | 用户故事 | 优先级 |
|----|----------|--------|
| S60 | 我可以切换不同的ASR（语音识别）模型 | P1 |
| S61 | 我可以根据视频类型选择合适的转写模型 | P2 |
| S62 | 我可以配置LLM供应商（OpenAI/Claude/本地） | P1 |
| S63 | 我可以设置处理队列的并发数和优先级 | P3 |

---

## 3. 功能清单

### 3.1 微信端功能

#### 被动接收（Push）
- [ ] 新视频处理完成通知
  - 视频标题、时长、UP主
  - AI生成的摘要（3句话）
  - 核心观点（3-5条）
  - 相关视频提示
- [ ] 周学习报告
  - 本周学习统计
  - 知识版图变化
  - 复习小测验
- [ ] 复习提醒
  - 基于遗忘曲线的推送

#### 主动交互（Chat）
- [ ] 快捷指令
  - `详细` - 获取完整摘要
  - `文稿` - 获取完整转写文本（分段发送）
  - `相关` - 查看相关视频
- [ ] 自然语言问答
  - `问 [视频名] xxx` - 针对特定视频提问
  - `xxx是什么意思` - 跨视频概念检索
  - `帮我复习xxx` - 生成复习内容

### 3.2 Web端功能

#### Dashboard（首页）
- [ ] 学习概览卡片（视频数、时长、领域）
- [ ] 知识版图（领域分布饼图/柱图）
- [ ] 最近学习列表
- [ ] 待处理视频状态

#### Library（视频库）
- [ ] 视频列表（缩略图、标题、摘要预览）
- [ ] 搜索（标题、内容、标签）
- [ ] 筛选（按标签、时间、状态）
- [ ] 批量操作（打标签、删除）

#### Detail（视频详情）
- [ ] 标签页切换：摘要 / 完整文稿 / 时间轴 / 笔记
- [ ] AI问答面板
- [ ] 相关视频推荐
- [ ] 导出功能

#### Graph（知识图谱）
- [ ] 概念-视频关系可视化
- [ ] 按领域筛选
- [ ] 点击节点查看详情
- [ ] 2D/3D切换

#### Settings（设置）
- [ ] 监控收藏夹管理
- [ ] 通知偏好设置
- [ ] API密钥配置
- [ ] 数据导出/备份
- [ ] ASR模型配置
- [ ] LLM供应商配置

### 3.3 MCP Server功能

#### Tools（工具）
- [ ] `search_videos` - 语义搜索视频库
  - 输入：query（搜索词）、limit（数量）
  - 输出：匹配的视频列表及摘要
- [ ] `get_video_detail` - 获取视频详情
  - 输入：video_id 或 bvid
  - 输出：完整文稿、摘要、标签
- [ ] `ask_knowledge` - 知识库问答
  - 输入：question（问题）、video_ids（可选，限定范围）
  - 输出：基于视频内容的回答
- [ ] `get_related_videos` - 获取相关视频
  - 输入：video_id 或 concept（概念）
  - 输出：相关视频列表

#### Resources（资源）
- [ ] `videos://list` - 视频列表资源
- [ ] `videos://{id}/transcript` - 视频文稿资源
- [ ] `concepts://list` - 概念列表资源

### 3.4 ASR模型支持

#### 支持的模型
| 模型 | 特点 | 适用场景 |
|------|------|----------|
| **Whisper (本地)** | 免费、质量好、较慢 | 默认选项 |
| **Faster-Whisper** | 速度快4x、内存省 | 批量处理 |
| **讯飞ASR** | 中文优化、实时 | 中文视频 |
| **阿里Paraformer** | 中文免费、速度快 | 本地部署 |
| **OpenAI Whisper API** | 云端、稳定 | 不想本地部署 |

#### 配置项
- [ ] 默认ASR模型选择
- [ ] 按视频语言自动切换
- [ ] 模型参数调优（精度/速度权衡）
- [ ] 自定义热词/专业术语

---

## 4. 信息架构

### 4.1 微信交互流程
```
用户收藏视频
     │
     ▼
[系统检测到新视频]
     │
     ▼
[后台处理：下载→转写→AI分析]
     │
     ▼
[微信推送处理结果]
     │
     ├──用户回复"详细"──► 发送完整摘要
     ├──用户回复"文稿"──► 分段发送文稿
     ├──用户回复"问 xxx"──► AI回答问题
     └──用户无回复──► 结束
```

### 4.2 Web页面结构
```
/                     # Dashboard
/library              # 视频库列表
/library/:id          # 视频详情页
/graph                # 知识图谱
/settings             # 设置页
/settings/folders     # 收藏夹管理
/settings/notify      # 通知设置
/settings/api         # API配置
```

---

## 5. 里程碑规划

### Phase 1: MVP（2周）
**目标**：跑通基础闭环

- [ ] 收藏夹监控（定时轮询）
- [ ] 视频下载 + 音频提取
- [ ] Whisper转写
- [ ] AI摘要生成
- [ ] 微信通知推送
- [ ] 基础Web页面（视频列表+详情）

### Phase 2: 知识增强（2周）
**目标**：让知识有关联

- [ ] 自动标签分类
- [ ] 概念提取
- [ ] 跨视频问答
- [ ] 相关视频推荐
- [ ] 知识图谱基础版

### Phase 3: 学习闭环（2周）
**目标**：帮助记忆和成长

- [ ] 学习周报
- [ ] 复习提醒
- [ ] 知识覆盖度统计
- [ ] 导出功能

### Phase 4: 扩展（持续）
- [ ] 多平台支持
- [ ] 移动端适配
- [ ] 协作/分享功能

---

## 6. 成功指标

| 指标 | 目标 |
|------|------|
| 日活跃问答次数 | > 5次/天 |
| 收藏→查看转化率 | > 50% |
| 周报打开率 | > 70% |
| 知识复用率 | 有跨视频关联的问答占比 > 30% |

---

## 7. 风险与依赖

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| B站API变化/封禁 | 无法获取视频 | 支持手动上传备选 |
| Whisper处理慢 | 用户等待久 | 异步处理+进度通知 |
| 微信封禁机器人 | 无法推送 | 企业微信/备选邮件 |
| AI成本高 | 费用超支 | 本地模型备选 |

---

*文档版本: v0.1*  
*最后更新: 2024-12-01*
